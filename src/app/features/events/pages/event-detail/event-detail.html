<main class="main-container p-6">
  <div class="flex mb-2 items-center gap-2">
    <lucide-angular routerLink="/events" [img]="CornerDownLeft" [size]="36" class="cursor-pointer border border-text-300 rounded-md shadow-2xs shadow-text-300"></lucide-angular>
    <h1 class="text-3xl font-bold">{{event?.name}}</h1>
  </div>
  <p routerLink="/events/{{event?.id}}/registration" class="text-lg underline cursor-pointer">http://localhost:4200/events/{{event?.id}}/registration</p>
  <p class="text-lg text-gray-500 mt-1">{{event?.startDate}}</p>

  <section class="mt-4">
    <h1 class="font-bold text-xl">Attendance Overview</h1>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-1">
      <app-stat-card
        title="Attendees (Overall)"
        icon="person"
        [value]="checkedInAttendees.data.length || 0"
        description="Overall Attendee Count"
      ></app-stat-card>

      <app-stat-card
        title="Registered Attendees"
        icon="person"
        [value]="registeredAttendees.data.length || 0"
        description="Total Registered Attendees"
      ></app-stat-card>
    </div>
  </section>

  <section class="mt-4">
    <h1 class="font-bold text-xl">Registered Attendees</h1>
    <app-search (search)="applyFilterRegistered($event)"></app-search>
    
    <div class="overflow-x-auto">
      <table cdk-table [dataSource]="registeredAttendees" class="min-w-[650px] w-full border border-text-300 rounded-md mt-1">
        <ng-container cdkColumnDef="fullName">
          <th cdk-header-cell *cdkHeaderCellDef class="bg-[#067BC3] text-left pl-6 py-3 text-white">Full Name</th>
          <td cdk-cell *cdkCellDef="let element" class="bg-monochromatic-light text-left pl-6 py-3 text-text-900 font-bold border-t border-text-300"> {{element.firstName}} {{element.lastName}} </td>
        </ng-container>
  
        <ng-container cdkColumnDef="primaryLeader">
          <th cdk-header-cell *cdkHeaderCellDef class="bg-[#067BC3] text-left py-3 text-white">Primary Leader</th>
          <td cdk-cell *cdkCellDef="let element" class="bg-monochromatic-light text-left py-2 text-text-900 border-t border-text-300"> {{element.primaryLeader}} </td>
        </ng-container>
  
        <ng-container cdkColumnDef="churchHierarchy">
          <th cdk-header-cell *cdkHeaderCellDef class="bg-[#067BC3] text-left py-3 text-white">Church Hierarchy</th>
          <td cdk-cell *cdkCellDef="let element" class="bg-monochromatic-light text-left py-2 text-text-900 border-t border-text-300"> {{element.churchHierarchy}} </td>
        </ng-container>
  
        <ng-container cdkColumnDef="memberStatus">
          <th cdk-header-cell *cdkHeaderCellDef class="bg-[#067BC3] text-left py-3 text-white">Member Status</th>
          <td cdk-cell *cdkCellDef="let element" class="bg-monochromatic-light text-left py-2 text-text-900 border-t border-text-300"> {{element.memberStatus}} </td>
        </ng-container>
  
        <ng-container cdkColumnDef="actions">
          <th cdk-header-cell *cdkHeaderCellDef class="bg-[#067BC3] text-left pr-6 py-3 text-white">Actions</th>
          <td cdk-cell *cdkCellDef="let element" class="bg-monochromatic-light pr-6 text-left py-2 text-text-900 border-t border-text-300"> 
            <button
              (click)="checkInAttendee(element.id)"
              class="px-4 py-2 font-bold rounded-md bg-monochromatic-dark hover:brightness-95 text-white cursor-pointer disabled:bg-gray-400 disabled:text-gray-200 disabled:cursor-not-allowed"
              [disabled]="isCheckedIn(element.id)"
            >Check In</button>
          </td>
        </ng-container>
  
        <tr cdk-header-row *cdkHeaderRowDef="registeredAttendeesColumns"></tr>
        <tr cdk-row *cdkRowDef="let row; columns: registeredAttendeesColumns;"></tr>
      </table>
    </div>

    <mat-paginator [pageSizeOptions]="[5, 10, 25, 50]" aria-label="Select page of users" showFirstLastButtons></mat-paginator>
  </section>

  <section class="mt-2">
    <h1 class="font-bold text-xl">Overall Checked In Attendees (Actual)</h1>
    <app-search (search)="applyFilterCheckedIn($event)"></app-search>

    <div class="overflow-x-auto">
      <table cdk-table [dataSource]="checkedInAttendees" class="min-w-[650px] w-full border border-text-300 rounded-md mt-1">
        <ng-container cdkColumnDef="fullName">
          <th cdk-header-cell *cdkHeaderCellDef class="bg-[#067BC3] text-left pl-6 py-3 text-white">Full Name</th>
          <td cdk-cell *cdkCellDef="let element" class="bg-monochromatic-light text-left pl-6 py-3 text-text-900 font-bold border-t border-text-300"> {{element.firstName}} {{element.lastName}} </td>
        </ng-container>

        <ng-container cdkColumnDef="primaryLeader">
          <th cdk-header-cell *cdkHeaderCellDef class="bg-[#067BC3] text-left py-3 text-white">Primary Leader</th>
          <td cdk-cell *cdkCellDef="let element" class="bg-monochromatic-light text-left py-2 text-text-900 border-t border-text-300"> {{element.primaryLeader}} </td>
        </ng-container>

        <ng-container cdkColumnDef="churchHierarchy">
          <th cdk-header-cell *cdkHeaderCellDef class="bg-[#067BC3] text-left py-3 text-white">Church Hierarchy</th>
          <td cdk-cell *cdkCellDef="let element" class="bg-monochromatic-light text-left py-2 text-text-900 border-t border-text-300"> {{element.churchHierarchy}} </td>
        </ng-container>

        <ng-container cdkColumnDef="memberStatus">
          <th cdk-header-cell *cdkHeaderCellDef class="bg-[#067BC3] text-left py-3 text-white">Member Status</th>
          <td cdk-cell *cdkCellDef="let element" class="bg-monochromatic-light text-left py-2 text-text-900 border-t border-text-300"> {{element.memberStatus}} </td>
        </ng-container>

        <ng-container cdkColumnDef="timeArrival">
          <th cdk-header-cell *cdkHeaderCellDef class="bg-[#067BC3] text-left pr-6 py-3 text-white">Time Arrival</th>
          <td cdk-cell *cdkCellDef="let element" (click)="checkInAttendee(element.id)" class="bg-monochromatic-light pr-6 text-left py-2 text-text-900 border-t border-text-300"> 
            {{element.timeIn | date: 'shortTime'}}
          </td>
        </ng-container>

        <tr cdk-header-row *cdkHeaderRowDef="checkedInAttendeesColumns"></tr>
        <tr cdk-row *cdkRowDef="let row; columns: checkedInAttendeesColumns;"></tr>
      </table>
    </div>

    <mat-paginator #checkedInPaginator [pageSizeOptions]="[5, 10, 25, 50]" showFirstLastButtons></mat-paginator>
  </section>

  <section class="mt-4">
    <h1 class="font-bold text-xl">Reports</h1>
    <img src="https://imgs.search.brave.com/N2byvN9JkSILUVdzarsAc3CmTS09ObrJviNWvlQItTY/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9tZWRp/YS5pc3RvY2twaG90/by5jb20vaWQvOTYw/MjY4NTQyL3ZlY3Rv/ci91bmRlci1jb25z/dHJ1Y3Rpb24uanBn/P3M9NjEyeDYxMiZ3/PTAmaz0yMCZjPUp0/TEZheHBnc0hHTl9W/RXpPdllaZmt6Wlgy/cjZiNDN3Z2JFcFRm/d1ZrcW89" alt="website-under-construction">
  </section>

<!-- 
  <section class="mt-6 max-w-xl space-y-4">
    <p class="font-medium">Reports</p>
    <label class="flex items-center justify-between border rounded px-3 py-2 cursor-pointer">
      <span>Attendance Summary</span>
      <input type="checkbox" class="peer hidden" />
      <span class="text-2xl peer-checked:text-yellow-400 text-gray-400">★</span>
    </label>
    <label class="flex items-center justify-between border rounded px-3 py-2 cursor-pointer">
      <span>Leader Attendance Summary</span>
      <input type="checkbox" class="peer hidden" />
      <span class="text-2xl peer-checked:text-yellow-400 text-gray-400">★</span>
    </label>
    <label class="flex items-center justify-between border rounded px-3 py-2 cursor-pointer">
      <span>Cell Member Attendance Summary</span>
      <input type="checkbox" class="peer hidden" />
      <span class="text-2xl peer-checked:text-yellow-400 text-gray-400">★</span>
    </label>
  </section> 
-->
</main>
